<div class="max-w-2xl mx-auto p-6">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-main mb-2">My Tasks</h1>
    <p class="text-secondary">
      @if (totalCount === 0) {
        No tasks yet. Add one to get started!
      } @else {
        {{ completedCount }} of {{ totalCount }} tasks completed
      }
    </p>
  </div>

  <!-- Add new task form -->
  <div class="mb-6 bg-accent rounded-lg p-4">
    <div class="flex gap-2">
      <input
        type="text"
        [(ngModel)]="newTodoTitle"
        (keyup.enter)="addTodo()"
        placeholder="Add a new task..."
        class="flex-1 rounded-md bg-white px-3 py-2 text-base text-main outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-primary sm:text-sm/6"
      />
      <button
        (click)="addTodo()"
        [disabled]="!newTodoTitle.trim()"
        class="px-4 py-2 bg-primary text-white rounded-md font-medium hover:bg-opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
      >
        Add
      </button>
    </div>
  </div>

  <!-- Todo list -->
  <div class="space-y-2">
    @if (todos.length === 0) {
      <div class="text-center py-12 text-secondary">
        <p class="text-lg">No tasks yet</p>
        <p class="text-sm mt-2">Add your first task above to get started!</p>
      </div>
    } @else {
      @for (todo of todos; track todo.id) {
        <div
          class="bg-white rounded-lg p-4 outline outline-1 -outline-offset-1 outline-gray-200 hover:outline-gray-300 transition-all flex items-center gap-3"
          [class.opacity-60]="todo.completed"
        >
          <input
            type="checkbox"
            [checked]="todo.completed"
            (change)="toggleTodo(todo.id)"
            class="w-5 h-5 rounded border-gray-300 text-primary focus:ring-primary cursor-pointer"
          />
          <span
            class="flex-1 text-main cursor-pointer"
            [class.line-through]="todo.completed"
            [class.text-secondary]="todo.completed"
            (click)="toggleTodo(todo.id)"
          >
            {{ todo.title }}
          </span>
          <button
            (click)="deleteTodo(todo.id)"
            class="text-red-500 hover:text-red-700 p-1 rounded transition-colors"
            aria-label="Delete task"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
            </svg>
          </button>
        </div>
      }
    }
  </div>
</div>

